{% extends "layouts/base.html" %}

{% block title %} Initiate Challenge {% endblock title %}

{% block content %}


var chartLabel = JSON.parse({{ chartLabel | tojson | safe }});
var win = {{ memberMatches[member.MEID|string][0] }}
var lose = {{ memberMatches[member.MEID|string][1] }}
var chartValueWin = JSON.parse({{ win | tojson | safe }});
var chartValueLose = JSON.parse({{ lose | tojson | safe }});
    dataSource = {
        chart: {
        caption: "Win & Lose in Last 5 months",
        placevaluesinside: "1",
        showvalues: "0",
        plottooltext: "<b>$dataValue</b>  $seriesName challenges",
        theme: "fusion"
        },
        categories: [
        {
            category: chartLabel
        }
        ],
        dataset: [
        {
            seriesname: "Win",
            data: chartValueWin
        },
        {
            seriesname: "Lose",
            data: chartValueLose
        }
        ]
    };

    FusionCharts.ready(function() {
        var myChart = new FusionCharts({
        type: "stackedbar2d",
        renderAt: "chart-{{ member.MEID }}",
        width: "100%",
        height: "100%",
        dataFormat: "json",
        dataSource
        }).render();
    });

    const source{{ member.MEID }}
----------

datasource = {
    chart: {
      caption: "Win & Lose in Last 5 months",
      placevaluesinside: "1",
      showvalues: "0",
      plottooltext: "<b>$dataValue</b>  $seriesName challenges",
      theme: "fusion"
    },
    categories: [
      {
        category: chartLabel
      }
    ],
    dataset: [
      {
        seriesname: "Win",
        data: chartValueWin
      },
      {
        seriesname: "Lose",
        data: chartValueLose
      }
    ]
  };

FusionCharts.ready(function() {
    var myChart = new FusionCharts({
    type: "stackedbar2d",
    renderAt: "chart-{{ member.MEID }}",
    width: "100%",
    height: "100%",
    dataFormat: "json",
    datasource
    }).render();
});

-------------

$(function(){
    $.ajax({
      url:'xxxx',
      type:'post',
      dataType:'json',
      data:$('#form-{{ member.MEID }}').serialize()
      success:function(result){
          //回调函数
      }
    });

  })
{% endblock %}